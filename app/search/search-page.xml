<Page actionBarHidden="false"
	navigatingTo="onNavigatingTo" 
	xmlns="http://schemas.nativescript.org/tns.xsd">
	
	<ActionBar flat="false">
		<GridLayout 
			columns="auto, 5, *, 5, 40, 10">
			<Button
				visibility="{{ !searchText && viewMode === 'SEARCH' ? 'visible' : 'collapsed' }}"
				text="&#xf015;"
				textWrap="true"
				tap="onTapHomeAndStartSearch"
				class="text-center text-black fas text-[18px] rounded-full bg-white active:bg-gray-200 active:scale-95 transition duration-150"
				width="50"
				col="0"
				/>
			<Button
				visibility="{{ searchTextResult && viewMode === 'RESULT' ? 'visible' : 'collapsed' }}"
				text="&#xf002;"
				textWrap="true"
				tap="onTapHomeAndStartSearch"
				class="text-center text-black fas text-[18px] rounded-full bg-white active:bg-gray-200 active:scale-95 transition duration-150"
				width="50"
				col="0"
				/>
			<!-- <Label
				visibility="{{ !loadingExecute ? 'visible' : 'collapsed' }}"
				text="{{ viewMode === 'RESULT' ? '&#xf002;' : '&#xf015;' }}"
				tap="onTapHomeAndStartSearch"
				textWrap="true"
				class="text-left text-gray-400 fas text-[18px]"
				col="0"
				/> -->
			
			<TextField 
				visibility="{{ viewMode === 'SEARCH' ? 'visible' : 'collapsed' }}"
				text="{{ searchText }}"
				hint="Ketikan sesuatu untuk mencari..." 
				class="bg-white text-black"
				fontSize="14"
				textChange="onTextChangeSearch"
				returnKeyType="search" 
				returnPress="onSubmitSearch"
				id="searchInput"
				col="2" />
			<Label 
				visibility="{{ viewMode === 'RESULT' ? 'visible' : 'collapsed' }}"
				text="{{ searchTextResult }}" 
				class="text-left text-black"
				col="2" />
			<!-- <Button 
				text="&#xf00d;" 
				textWrap="true" 
				class="text-left text-gray-400 fas text-[20px]"
				col="4" /> -->
			<ActivityIndicator 
				visibility="{{ loadingExecute ? 'visible' : 'collapsed' }}"
				color="#000000" 
				width="30"
				height="30" 
				busy="true" 
				col="4" />
			<Button
				visibility="{{ !searchTextResult && searchText && !loadingExecute ? 'visible' : 'collapsed' }}"
				text="&#xf00d;"
				textWrap="true"
				tap="onClearSearch"
				class="text-center text-black fas text-[18px] rounded-full bg-white active:bg-gray-200 active:scale-95 transition duration-150"
				width="40"
				col="4"
				/>
			<!-- <Label
				visibility="{{ !searchTextResult && searchText ? 'visible' : 'collapsed' }}"
				text="&#xf00d;"
				textWrap="true"
				tap="onClearSearch"
				class="text-left text-gray-400 fas text-[18px]"
				col="4"
				/> -->
		</GridLayout>
	</ActionBar>
	
	<GridLayout rows="10, *, 0, auto" class="px-5 pb-5">
		<GridLayout rows="auto, 0, *" row="1" 
			visibility="{{ viewMode === 'SEARCH' ? 'visible' : 'collapsed' }}">
			<Label
				textWrap="true"
				visibility="{{ (!searchText && !loadingExecute && recentSearches.length) ? 'visible' : 'collapsed' }}" 
				class="text-left text-[10px] my-3"
				col="0">
				<FormattedString>
					<Span text="PENCARIAN TERKINI" class="popin-br text-gray-600" />
				</FormattedString>
			</Label>
			<ListView 
				items="{{ recentSearches }}" 
				itemTap="onTapRecentSearches"
				visibility="{{ (!searchText && !loadingExecute && recentSearches.length) ? 'visible' : 'collapsed' }}" 
				row="2">
				<ListView.itemTemplate>
					<GridLayout columns="auto, 10, *">
						<Label col="0" textWrap="true" class="text-[12px] my-2">
							<FormattedString>
								<Span text="&#xf1da;" class="fas" />
							</FormattedString>
						</Label>
						<Label col="2" textWrap="true" class="text-[12px] my-2">
							<FormattedString>
								<Span text="{{ word }}" class="popin-r" />
							</FormattedString>
						</Label>
					</GridLayout>
				</ListView.itemTemplate>
			</ListView>
			<StackLayout row="2" class="mt-5"
				visibility="{{ (!searchText && !loadingExecute && !recentSearches.length) ? 'visible' : 'collapsed' }}" >
				<Label
					textWrap="true"
					text="&#xf5da;" class="fas text-center text-gray-500 text-[56px] mt-5"
					/>
				<Label
					textWrap="true"
					text="Tidak ada data." class="popin-l text-center text-gray-500 mt-3"
					/>
			</StackLayout>

			<Label
				textWrap="true"
				visibility="{{ (searchText && !loadingExecute && autoComplete.length) ? 'visible' : 'collapsed' }}" 
				class="text-left text-[10px] my-3"
				col="0">
				<FormattedString>
					<Span text="HASIL PENCARIAN" class="popin-br text-gray-600" />
				</FormattedString>
			</Label>
			<ListView 
				items="{{ autoComplete }}" 
				itemTap="onTapAutoComplete"
				visibility="{{ searchText && !loadingExecute && autoComplete.length ? 'visible' : 'collapsed' }}"
				row="2">
				<ListView.itemTemplate>
					<GridLayout columns="auto, auto, *">
						<Label col="0" textWrap="true" class="text-[12px] my-2">
							<FormattedString>
								<Span text="&#xf002;" class="fas" />
								<Span text="&nbsp;&nbsp;&nbsp;" />
								<Span text="{{ searchWord }}" class="popin-br" />
								<Span text="{{ otherWord }}" class="popin-r" />
							</FormattedString>
						</Label>
					</GridLayout>
				</ListView.itemTemplate>
			</ListView>
			<StackLayout row="2" class="mt-5"
				visibility="{{ searchText && !loadingExecute && !autoComplete.length ? 'visible' : 'collapsed' }}" >
				<Label
					textWrap="true"
					text="&#xf5c8;" class="far text-center text-gray-500 text-[56px] mt-5"
					/>
				<Label
					textWrap="true"
					text="Kata tidak di temukan." class="popin-l text-center text-gray-500 mt-3"
					/>
			</StackLayout>
			<StackLayout row="2" class="mt-5"
				visibility="{{ searchText && loadingExecute ? 'visible' : 'collapsed' }}" >
				<Label
					textWrap="true"
					text="&#xf252;" class="far text-center text-gray-500 text-[56px] mt-5"
					/>
				<Label
					textWrap="true"
					text="Harap tunggu, sedang mencari..." class="popin-l text-center text-gray-500 mt-3"
					/>
			</StackLayout>
		</GridLayout>

		<GridLayout rows="auto, 0, *" row="1"
			visibility="{{ viewMode === 'RESULT' ? 'visible' : 'collapsed' }}">
			

			<ListView separatorColor="#FFF"
				items="{{ localResultOfSearch }}"
				visibility="{{ localResultOfSearch.length ? 'visible' : 'collapsed' }}" 
				row="2">
				<ListView.itemTemplate>
					<StackLayout >
					<Label textWrap="true" class="text-[24px] my-2">
						<FormattedString>
							<Span text="{{ word }}" class="popin-r" />
						</FormattedString>
					</Label>
					<HtmlView html="{{ arti }}" />
				</StackLayout>
				</ListView.itemTemplate>
			</ListView>
		</GridLayout>

		<!-- Text Info -->
		<Label 
			class="text-center text-orange-400 text-[12px] mt-3" 
			visibility="{{ viewMode === 'SEARCH' && recentSearches.length ? 'visible' : 'collapsed' }}"
			row="3">
			<FormattedString>
				<Span text="&#xf4d8;" class="fas" />
				<Span text="&nbsp;&nbsp;" />
				<Span text="Anda dapat mencari kata atau peribahasa disini" class="popin-r" />
			</FormattedString>
		</Label>
	</GridLayout>
</Page>
